<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>&lt;cubx-marked-element&gt; Demo</title>

    <script src="../../../cubx.core.rte@1.9.0/webcomponents/webcomponents-lite.js"></script>

    <script>
        window.cubx = {
            CRCInit: {
                rootDependencies: [
                    "../../../bootstrap-3.3.5@1.0.3/bootstrap/main"
                ]
            }
        }
    </script>

    <!--
        Refer to the crc-loader artifact from a Cubbles-Base.
        Take care: All other dependencies are expected to be available within the same Base!

        Want to add a 'main' -script to be executed after the dependencies have been loaded?
        If yes, add the following attribute: data-crc-main="js/my-script.js"
    -->
    <script src="../../../cubx.core.rte@1.9.0/crc-loader/js/main.js" data-crcinit-loadcif="true"></script>

</head>
<body>

<div class="container">
    <div class="row">
        <div class="alert alert-danger fade in" id="alertD" style="display: none">
            <a href="#" class="close" data-dismiss="alert">&times;</a>
            <strong>Error!</strong> <span id="alertDText"></span>.
        </div>
    </div>
    <div class="row">
        <h1>&lt;cubx-marked-element&gt; Demo</h1>
    </div>
    <div class="row">
        <label for="urlTF" >File url: </label>
        <input id="urlTF"
               style="width: 80%"
               value="https://raw.githubusercontent.com/iCubbles/cubx-polymer-elements/master/webpackages/com.incowia.cubx-marked-element/README.md"/>
        <input type="submit" value="Load" id="loadB" class="btn btn-primary" disabled>
    </div>
    <div class="row panel panel-default">
        <div cubx-core-crc class="col-sm-12">
            <cubx-marked-element cubx-dependency="this/cubx-marked-element/main"></cubx-marked-element>
        </div>
    </div>
</div>

<script>
    var loadB = document.querySelector('#loadB');
    var urlTF = document.querySelector('#urlTF');
    var alertD = document.querySelector('#alertD');
    var alertDText = document.querySelector('#alertDText');
    var cubxMarkedElement = document.querySelector('cubx-marked-element');

    document.addEventListener('cifReady', function () {
        loadB.removeAttribute('disabled');
    });

    loadB.addEventListener('click', function () {
        if (urlTF.value !== '') {
            cubxMarkedElement.setMarkdownUrl(urlTF.value);
        } else {
            alertDText.textContent = 'Please fill out the File url field';
            alertD.style.display = 'block';
        }
    });
</script>
</body>
</html>
